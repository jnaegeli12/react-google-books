(this["webpackJsonpreact-books"]=this["webpackJsonpreact-books"]||[]).push([[0],{60:function(e,t,a){},61:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(1),c=a.n(r),i=a(25),s=a.n(i),o=a(10),l=a(2),d=a(26),u=a(27),j=a(31),h=a(29);var b=function(e){return Object(n.jsxs)("form",{className:"form-inline center",children:[Object(n.jsx)("input",{onChange:e.handleInputChange,value:e.query,className:"form-control mr-sm-2",type:"search",placeholder:"Search for a book","aria-label":"Search"}),Object(n.jsx)("button",{onClick:e.handleFormSubmit,className:"btn btn-outline-success my-2 my-sm-0",type:"submit",children:"Search"})]})};var v=function(e){return Object(n.jsxs)("div",{className:"container",children:[Object(n.jsx)("h2",{children:"Search Results"}),e.children]})},m=a(11),f=a.n(m),x={searchGoogle:function(e){var t="https://www.googleapis.com/books/v1/volumes?key=AIzaSyAIY4R3KJo33zPFCjFeSoMxrFgHZBHiuw4&q="+e;return f.a.get(t)},getFavorites:function(){return console.log("this is the API"),f.a.get("/api/books")},addtoFavorites:function(e){return f.a.post("api/books",e)},removeFavorites:function(e){return f.a.delete("api/books/"+e)}};var O=function(e){return Object(n.jsx)("div",{className:"row",children:Object(n.jsx)("div",{className:"card w-100",children:Object(n.jsxs)("div",{className:"card-body",children:[Object(n.jsx)("img",{src:e.image,alt:"cover"}),Object(n.jsx)("h3",{className:"card-text",children:e.title}),Object(n.jsx)("h4",{className:"card-text",children:e.authors}),Object(n.jsx)("p",{className:"card-text",children:e.description}),Object(n.jsxs)("div",{className:"d-flex w-100 justify-content-between",children:[Object(n.jsx)("a",{href:e.link,target:"_blank",rel:"noreferrer",className:"btn btn-outline-dark",children:"More details"}),Object(n.jsx)("input",{onClick:e.onClick,readOnly:!0,value:e.value,className:"btn btn-outline-dark"})]})]})},e.id)})},g=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={books:[],query:""},e.refreshResults=function(){window.location.reload(!1)},e.handleInputChange=function(t){var a=t.target.value;e.setState({query:a})},e.handleFormSubmit=function(t){t.preventDefault(),x.searchGoogle(e.state.query).then((function(t){return e.setState({books:t.data.items,query:""})}))},e.handleAddFavorite=function(t){var a=e.state.books.find((function(e){return e.id===t}));x.addtoFavorites({googleId:a.id,title:a.volumeInfo.title,link:a.volumeInfo.infoLink,authors:a.volumeInfo.authors,description:a.volumeInfo.description,image:a.volumeInfo.imageLinks.thumbnail}).then(e.refreshResults())},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this;return Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{className:"container-fluid",children:[Object(n.jsx)("div",{className:"text-center",children:Object(n.jsx)("h2",{children:"Search for Books"})}),Object(n.jsx)(b,{handleInputChange:this.handleInputChange,handleFormSubmit:this.handleFormSubmit,query:this.state.query})]}),Object(n.jsx)(v,{children:this.state.books.map((function(t){return Object(n.jsx)("div",{children:Object(n.jsx)(O,{id:t._id,googleId:t.id,image:t.volumeInfo.imageLinks.thumbnail,title:t.volumeInfo.title,authors:t.volumeInfo.authors.join(", "),description:t.volumeInfo.description,link:t.volumeInfo.infoLink,value:"Add to Favorites",onClick:function(){return e.handleAddFavorite(t.id)}})})}))})]})}}]),a}(r.Component),p=a(30);var k=function(){var e=Object(r.useState)([]),t=Object(p.a)(e,2),a=t[0],c=t[1];function i(e){var t=a.find((function(t){return t._id===e}));console.log(t._id),x.removeFavorites(t._id),window.location.reload(!1)}return Object(r.useEffect)((function(){x.getFavorites().then((function(e){console.log(e.data),c(e.data)})).catch((function(e){return console.log(e)}))}),[]),Object(n.jsx)("div",{children:Object(n.jsxs)("div",{className:"container-fluid",children:[Object(n.jsx)("div",{className:"text-center",children:Object(n.jsx)("h2",{children:"Your Favorites"})}),Object(n.jsx)(v,{children:a.map((function(e){return Object(n.jsx)("div",{children:Object(n.jsx)(O,{id:e._id,googleId:e.googleId,image:e.image,title:e.title,authors:e.authors,description:e.description,link:e.link,value:"Remove from Favorites",onClick:function(){return i(e._id)}})})}))})]})})};var N=function(){return Object(n.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light",children:[Object(n.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNavAltMarkup","aria-controls":"navbarNavAltMarkup","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(n.jsx)("span",{className:"navbar-toggler-icon"})}),Object(n.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNavAltMarkup",children:Object(n.jsxs)("div",{className:"navbar-nav",children:[Object(n.jsx)(o.b,{className:"nav-item nav-link",to:"/search",children:Object(n.jsx)("h3",{children:"Search"})}),Object(n.jsx)(o.b,{className:"nav-item nav-link",to:"/favorites",children:Object(n.jsx)("h3",{children:"Favorites"})})]})})]})};var y=function(){return Object(n.jsx)("div",{className:"jumbotron jumbotron-fluid",children:Object(n.jsxs)("div",{className:"container-fluid",children:[Object(n.jsx)("h1",{children:"Google Book Search"}),Object(n.jsx)("p",{className:"lead",children:"Search the entire Google database of books and save them to your personal list."})]})})};var I=function(){return Object(n.jsx)(o.a,{children:Object(n.jsxs)("div",{children:[Object(n.jsx)(N,{className:"active"}),Object(n.jsx)(y,{}),Object(n.jsxs)(l.c,{children:[Object(n.jsx)(l.a,{exact:!0,path:["/","/search"],children:Object(n.jsx)(g,{})}),Object(n.jsx)(l.a,{exact:!0,path:"/favorites",children:Object(n.jsx)(k,{})})]})]})})};a(59),a(60);s.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(I,{})}),document.getElementById("root"))}},[[61,1,2]]]);
//# sourceMappingURL=main.a2cc6e67.chunk.js.map